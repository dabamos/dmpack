.TH "DMGRC" "1" "" "Version 2.0.0" "User Commands"
.SH NAME
dmgrc \(en creates log messages from Leica GeoCOM return codes
.SH SYNOPSIS
\f[B]dmgrc\f[R] \-\-help
.PP
\f[B]dmgrc\f[R] \-\-version
.PP
\f[B]dmgrc\f[R] [\-\-\f[B]node\f[R] \f[I]id\f[R]] [\-\-\f[B]level\f[R]
\f[I]level\f[R]] [\-\-\f[B]response\f[R] \f[I]name\f[R]]
[\-\-\f[B]name\f[R] \f[I]name\f[R]] [\-\-\f[B]logger\f[R]
\f[I]name\f[R]] [\-\-\f[B]debug\f[R]] [\-\-\f[B]verbose\f[R]]
.PP
\f[B]dmgrc\f[R] \-\-\f[B]config\f[R] \f[I]file\f[R] [\-\-\f[B]name\f[R]
\f[I]name\f[R]]
.SH DESCRIPTION
The \f[B]dmgrc\f[R] program creates log messages from Leica GeoCOM
return codes.
Observations received by POSIX message queue are searched for a GeoCOM
return code (GRC) response.
If the code does not equal \f[CR]GRC_OK\f[R], a log message is sent to
the configured logger instance.
.PP
By default, observation responses of name \f[CR]grc\f[R] are verified.
For each GeoCOM error code, a custom log level may be specified in the
configuration file.
Otherwise, the default log level is used instead.
.SH OPTIONS
.TP
\f[B]\-\-config\f[R], \f[B]\-c\f[R] \f[I]file\f[R]
File path to the optional configuration file.
.TP
\f[B]\-\-debug\f[R], \f[B]\-D\f[R]
Forward logs messages of level \f[CR]LL_DEBUG\f[R] via IPC (if logger is
set).
.TP
\f[B]\-\-help\f[R], \f[B]\-h\f[R]
Print available command\-line arguments and quit.
.TP
\f[B]\-\-level\f[R], \f[B]\-L\f[R] \f[I]level\f[R]
Default log level of return codes other than \f[CR]GRC_OK\f[R]
(\f[CR]LL_WARNING\f[R] by default).
The argument may be an integer or name string.
.TP
\f[B]\-\-logger\f[R], \f[B]\-l\f[R] \f[I]name\f[R]
Name of \f[I]dmlogger(1)\f[R] process to send logs to.
.TP
\f[B]\-\-name\f[R], \f[B]\-n\f[R] \f[I]name\f[R]
Name of program instance and configuration (\f[CR]dmgrc\f[R] by
default).
.TP
\f[B]\-\-node\f[R], \f[B]\-N\f[R] \f[I]id\f[R]
Node id.
.TP
\f[B]\-\-response\f[R], \f[B]\-R\f[R] \f[I]name\f[R]
Response name of the GeoCOM return code (\f[CR]grc\f[R] by default).
.TP
\f[B]\-\-verbose\f[R], \f[B]\-V\f[R]
Print log messages to \f[I]stderr\f[R].
.TP
\f[B]\-\-version\f[R], \f[B]\-v\f[R]
Print version information and quit.
.SH EXIT STATUS
.TP
\f[B]0\f[R]
Success.
Process terminated without errors.
.TP
\f[B]1\f[R]
Failure.
Process failed.
.SH ENVIRONMENT
.TP
\f[B]DM_LOGGER\f[R]
Name of logger instance to send logs to.
.TP
\f[B]NO_COLOR\f[R]
Disable ANSI colour output.
.SH EXAMPLE
A configuration file is not required, but allows to specifiy the log
level of certain GeoCOM return codes.
In the following example configuration, the default log level for all
return codes other than \f[CR]GRC_OK\f[R] is set to
\f[CR]LL_WARNING\f[R].
The level is further refined for specific GeoCOM codes:
.IP
.EX
\-\- dmgrc.conf
dmgrc = {
  logger = \(dqdmlogger\(dq,
  node = \(dqdummy\-node\(dq,
  response = \(dqgrc\(dq,
  level = LL_WARNING,
  levels = {
    debug = { GRC_ABORT, GRC_SHUT_DOWN, GRC_NO_EVENT },
    info = { GRC_SLEEP_NODE, GRC_NA, GRC_STOPPED },
    warning = { GRC_TMC_ACCURACY_GUARANTEE, GRC_AUT_NO_TARGET },
    error = { GRC_FATAL },
    critical =
  },
  debug = false,
  verbose = true
}
.EE
.PP
Pass the path of the configuration file through the command\-line
argument:
.IP
.EX
$ dmgrc \-n dmgrc \-c /usr/local/etc/dmpack/dmgrc.conf
.EE
.PP
The name argument must match the name of the configuration table.
