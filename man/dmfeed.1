.TH "DMFEED" "1" "" "Version 2.0.0" "User Commands"
.SH NAME
dmfeed \(en creates Atom XML feed from log messages
.SH SYNOPSIS
\f[B]dmfeed\f[R] \-\-help
.PP
\f[B]dmfeed\f[R] \-\-version
.PP
\f[B]dmfeed\f[R] \-\-\f[B]database\f[R] \f[I]file\f[R]
[\-\-\f[B]output\f[R] \f[I]file\f[R]] [\-\-\f[B]node\f[R] \f[I]id\f[R]]
[\-\-\f[B]minlevel\f[R] \f[I]level\f[R]] [\-\-\f[B]maxlevel\f[R]
\f[I]level\f[R]] [\-\-\f[B]entries\f[R] \f[I]count\f[R]]
[\-\-\f[B]author\f[R] \f[I]name\f[R]] [\-\-\f[B]email\f[R]
\f[I]address\f[R]] [\-\-\f[B]id\f[R] \f[I]uuid\f[R]]
[\-\-\f[B]title\f[R] \f[I]title\f[R]] [\-\-\f[B]subtitle\f[R]
\f[I]title\f[R]] [\-\-\f[B]url\f[R] \f[I]url\f[R]] [\-\-\f[B]xsl\f[R]
\f[I]file\f[R]]
.PP
\f[B]dmfeed\f[R] \-\-\f[B]config\f[R] \f[I]file\f[R] [\-\-\f[B]name\f[R]
\f[I]name\f[R]]
.SH DESCRIPTION
This program creates a web feed from log messages in Atom Syndication
Format (RFC 4287).
The log messages are read from database and written as XML to standard
output or file.
.PP
The feed id has to be a 36 characters long UUID with hyphens.
News aggregators use the id to identify the feed.
Therefore, the id should not be reused among different feeds.
Run \f[I]dmuuid(1)\f[R] to generate a valid UUID.
.PP
The time stamp of the feed in the updated element is set to the date and
time of the last log message.
If no logs have been added to the database since the last file
modification of the feed, the output file is not updated, unless
argument \f[CR]\-\-force\f[R] is passed.
.SH OPTIONS
.TP
\f[B]\-\-author\f[R], \f[B]\-A\f[R] \f[I]name\f[R]
Name of feed author or organisation.
.TP
\f[B]\-\-config\f[R], \f[B]\-c\f[R] \f[I]file\f[R]
Path to configuration file.
.TP
\f[B]\-\-database\f[R], \f[B]\-d\f[R] \f[I]file\f[R]
Path to SQLite log database.
.TP
\f[B]\-\-email\f[R], \f[B]\-M\f[R] \f[I]address\f[R]
E\-mail address of feed author.
.TP
\f[B]\-\-entries\f[R], \f[B]\-E\f[R] \f[I]count\f[R]
Maximum number of entries in feed (default is 50).
.TP
\f[B]\-\-force\f[R], \f[B]\-F\f[R]
Force writing of output file.
If not set, the output file will be updated only if new log records are
available.
.TP
\f[B]\-\-help\f[R], \f[B]\-h\f[R]
Print available command\-line arguments and quit.
.TP
\f[B]\-\-id\f[R], \f[B]\-I\f[R] \f[I]uuid\f[R]
UUID of the feed, 36 characters long with hyphens.
.TP
\f[B]\-\-maxlevel\f[R], \f[B]\-K\f[R] \f[I]level\f[R]
Select log messages of the given maximum log level (from 1 to 5).
Must be greater or equal the minimum level.
The argument may be an integer or name string.
.TP
\f[B]\-\-minlevel\f[R], \f[B]\-L\f[R] \f[I]level\f[R]
Select log messages of the given minimum log level (from 1 to 5).
The argument may be an integer or name string.
.TP
\f[B]\-\-name\f[R], \f[B]\-n\f[R] \f[I]name\f[R]
Name of instance and table in given configuration file (default is
\f[CR]dmfeed\f[R]).
.TP
\f[B]\-\-node\f[R], \f[B]\-N\f[R] \f[I]id\f[R]
Select log messages of the given node id.
.TP
\f[B]\-\-output\f[R], \f[B]\-o\f[R] \f[I]file\f[R]
Path of the output file.
If empty, the Atom feed will be printed to standard output.
.TP
\f[B]\-\-subtitle\f[R], \f[B]\-G\f[R] \f[I]title\f[R]
Sub\-title of feed.
.TP
\f[B]\-\-title\f[R], \f[B]\-C\f[R] \f[I]title\f[R]
Title of feed.
.TP
\f[B]\-\-url\f[R], \f[B]\-U\f[R] \f[I]url\f[R]
Public URL of the feed.
.TP
\f[B]\-\-version\f[R], \f[B]\-v\f[R]
Print version information and quit.
.TP
\f[B]\-\-xsl\f[R], \f[B]\-X\f[R]
URL or path of optional XSLT style sheet.
Web browsers may be able to display the Atom feed in HTML format if a
style sheet is provided.
.SH EXIT STATUS
.TP
\f[B]0\f[R]
Success.
Feed has been created.
.TP
\f[B]1\f[R]
Failure.
Feed creation failed.
.SH EXAMPLE
Generate a unique feed id, and then write the last 50 log messages in
Atom format to file \f[CR]feed.xml\f[R]:
.IP
.EX
$ dmuuid \-p
19c12109\-3e1c\-422c\-ae36\-3ba19281f2e
$ dmfeed \-d /var/dmpack/log.db \-o feed.xml \(rs
  \-I 19c12109\-3e1c\-422c\-ae36\-3ba19281f2e
.EE
.SH SEE ALSO
\f[I]dmuuid(1)\f[R]
