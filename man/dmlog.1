.TH "DMLOG" "1" "" "Version 2.0.0" "User Commands"
.SH NAME
dmlog \(en sends log to POSIX message queue
.SH SYNOPSIS
\f[B]dmlog\f[R] \-\-help
.PP
\f[B]dmlog\f[R] \-\-version
.PP
\f[B]dmlog\f[R] \-\-\f[B]node\f[R] \f[I]id\f[R] \-\-\f[B]message\f[R]
\f[I]string\f[R] [\-\-\f[B]logger\f[R] \f[I]name\f[R]]
[\-\-\f[B]level\f[R] \f[I]level\f[R]] [\-\-\f[B]error\f[R] \f[I]n\f[R]]
[\-\-\f[B]node\f[R] \f[I]id\f[R]] [\-\-\f[B]sensor\f[R] \f[I]id\f[R]]
[\-\-\f[B]target\f[R] \f[I]id\f[R]] [\-\-\f[B]observ\f[R] \f[I]id\f[R]]
[\-\-\f[B]source\f[R] \f[I]source\f[R]] [\-\-\f[B]debug\f[R]]
.SH DESCRIPTION
The \f[B]dmlog\f[R] utility forwards a log message to the POSIX message
queue of a \f[I]dmlogger(1)\f[R] instance.
Argument \f[CR]\-\-message\f[R] is mandatory.
Pass the name of the \f[I]dmlogger\f[R] or \f[I]dmrecv\f[R] instance to
send the log to through command\-line argument \f[CR]\-\-logger\f[R].
Alternatively, set environment variable \f[CR]DMLOGGER\f[R] to the name
of the logger.
The command\-line argument overwrites the environment variable.#
.PP
The default log level is \f[CR]info\f[R] (2).
Valid log levels are \f[CR]debug\f[R] (1), \f[CR]info\f[R] (2),
\f[CR]warning\f[R] (3), \f[CR]error\f[R] (4), \f[CR]critical\f[R] (5),
and \f[CR]user\f[R] (6).
The program terminates after log transmission.
.SH OPTIONS
.TP
\f[B]\-\-debug\f[R], \f[B]\-D\f[R]
Send log message of level \f[CR]debug\f[R] to logger.
.TP
\f[B]\-\-error\f[R], \f[B]\-e\f[R] \f[I]n\f[R]
DMPACK error code (>= 0).
.TP
\f[B]\-\-help\f[R], \f[B]\-h\f[R]
Print available command\-line arguments and quit.
.TP
\f[B]\-\-level\f[R], \f[B]\-L\f[R] \f[I]level\f[R]
Log level, from \f[CR]debug\f[R] (1) to \f[CR]user\f[R] (6) The default
level is \f[CR]info\f[R] (2).
The argument may be an integer or log level name string.
.TP
\f[B]\-\-logger\f[R], \f[B]\-l\f[R] \f[I]name\f[R]
Name of logger instance and POSIX message queue.
If the command\-line argument is not passed and the environment variable
\f[CR]DMLOGGER\f[R] is not set, the log messages will not be transmitted
via POSIX message queue.
.TP
\f[B]\-\-message\f[R], \f[B]\-m\f[R] \f[I]string\f[R]
Log message (max.
512 characters).
.TP
\f[B]\-\-node\f[R], \f[B]\-N\f[R] \f[I]id\f[R]
Node id.
.TP
\f[B]\-\-observ\f[R], \f[B]\-O\f[R] \f[I]id\f[R]
Observation id (UUIDv4).
.TP
\f[B]\-\-sensor\f[R], \f[B]\-S\f[R] \f[I]id\f[R]
Sensor id.
.TP
\f[B]\-\-source\f[R], \f[B]\-Z\f[R] \f[I]source\f[R]
Name of log message source (sender).
.TP
\f[B]\-\-target\f[R], \f[B]\-T\f[R] \f[I]id\f[R]
Target id.
.TP
\f[B]\-\-verbose\f[R], \f[B]\-V\f[R]
Print log to \f[I]stderr\f[R].
.TP
\f[B]\-\-version\f[R], \f[B]\-v\f[R]
Print version information and quit.
.SH EXIT STATUS
.TP
\f[B]0\f[R]
Success.
Log has been sent.
.TP
\f[B]1\f[R]
Failure.
Program execution failed.
.SH ENVIRONMENT
.TP
\f[B]DM_LOGGER\f[R]
Name of logger instance to send logs to.
.TP
\f[B]NO_COLOR\f[R]
Disable ANSI colour output.
.SH EXAMPLE
Send a log message to the POSIX message queue of logger
\f[CR]dmlogger\f[R]:
.IP
.EX
$ export DMLOGGER=dmlogger
$ dmlog \-N dummy\-node \-L warning \-m \(dqlow battery\(dq \-Z test \-V
2022\-12\-09T22:50:44.161000+01:00 [WARNING ] test \- low battery
.EE
.PP
The logger will receive the log message and insert it into the log
database (if the log level is greater or equal the minimum log level):
.IP
.EX
$ dmlogger \-N dummy\-node \-d log.db \-V
2022\-12\-09T22:50:44.161000+01:00 [WARNING] test \- low battery
.EE
.SH SEE ALSO
\f[I]dmlogger(1)\f[R]
