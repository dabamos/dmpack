.\" Automatically generated by Pandoc 3.8.3
.\"
.TH "DMVED" "1" "" "Version 2.0.0" "User Commands"
.SH NAME
dmved \(en reads status of connected MPPT charger or battery shunt
.SH SYNOPSIS
\f[B]dmved\f[R] \-\-help
.PP
\f[B]dmved\f[R] \-\-version
.PP
\f[B]dmved\f[R] \-\-\f[B]config\f[R] \f[I]file\f[R] [\-\-\f[B]name\f[R]
\f[I]name\f[R]] [\-\-\f[B]node\f[R] \f[I]id\f[R]] [\-\-\f[B]sensor\f[R]
\f[I]id\f[R]] [\-\-\f[B]target\f[R] \f[I]id\f[R]] [\-\-\f[B]device\f[R]
\f[I]type\f[R]] [\-\-\f[B]path\f[R] \f[I]path\f[R]]
[\-\-\f[B]receiver\f[R] \f[I]name\f[R]] [\-\-\f[B]interval\f[R]
\f[I]seconds\f[R]] [\-\-\f[B]dump\f[R] \f[I]path\f[R]]
[\-\-\f[B]logger\f[R] \f[I]name\f[R]] [\-\-\f[B]debug\f[R]]
.SH DESCRIPTION
This program captures status data received from a connected Maximum
Power Point Tracking (MPPT) solar charge controller or SmartShunt
battery monitor by Victron Energy, using the VE.Direct protocol.
Only the BlueSolar/SmartSolar MPPT series and the SmartShunt monitor are
supported.
The serial port will be configured to 19200 baud (8N1).
Observations are forwarded via message queue in the given interval if a
receiver is specified.
.PP
The following VE.Direct fields are captured, depending on the device:
.TP
Alarm
Alarm condition active (on/off).
.TP
AR
Alarm reason.
.TP
CE
Consumed amp hours (mAh).
.TP
CS
State of operation.
.TP
DM
Mid\-point deviation of the battery bank (%/10).
.TP
ERR
Error code.
.TP
H1
Depth of the deepest discharge (mAh).
.TP
H2
Depth of the last discharge (mAh).
.TP
H3
Depth of the average discharge (mAh).
.TP
H4
Number of charge cycles.
.TP
H5
Number of full discharges.
.TP
H6
Cumulative amp hours drawn (mAh).
.TP
H7
Minimum main (battery) voltage (mV).
.TP
H8
Maximum main (battery) voltage (mV).
.TP
H9
Number of seconds since last full charge (sec).
.TP
H10
Number of automatic synchronisations.
.TP
H11
Number of low main voltage alarms.
.TP
H12
Number of high main voltage alarms.
.TP
H15
Minimum auxiliary (battery) voltage (mV).
.TP
H16
Maximum auxiliary (battery) voltage (mV).
.TP
H17
Amount of produced energy (kWh/100).
.TP
H18
Amount of consumed energy (kWh/100).
.TP
H19
Yield total (kWh/100).
.TP
H20
Yield today (kWh/100).
.TP
H21
Maximum power today (W).
.TP
H22
Yield yesterday (kWh/100).
.TP
H23
Maximum power yesterday (W).
.TP
HSDS
Day sequence number (0 to 364).
.TP
I
Main or channel 1 battery current (mA).
.TP
IL
Load current (mA).
.TP
LOAD
Load output state (on/off).
.TP
MON
DC monitor mode.
.TP
MPPT
Tracker operation mode.
.TP
OR
Off reason.
.TP
P
Instantaneous power (W).
.TP
PPV
Panel power (W).
.TP
Relay
Relay state (on/off).
.TP
SOC
State\-of\-charge (%/10).
.TP
T
Battery temperature (degrees Celsius).
.TP
TTG
Time\-to\-go (min).
.TP
V
Main or channel 1 (battery) voltage (mV).
.TP
VM
Mid\-point voltage of the battery bank (mV).
.TP
VPV
Panel voltage (mV).
.TP
VS
Auxiliary (starter) voltage (mV).
.PP
The response names equal the field names in lower\-case.
.SH OPTIONS
.TP
\f[B]\-\-config\f[R], \f[B]\-c\f[R] \f[I]file\f[R]
File path to the configuration file.
.TP
\f[B]\-\-debug\f[R], \f[B]\-D\f[R]
Forward logs messages of level \f[CR]LL_DEBUG\f[R] via IPC (if logger is
set).
.TP
\f[B]\-\-device\f[R], \f[B]\-d\f[R] [mppt|shunt]
Connected device, either MPPT or SmartShunt.
.TP
\f[B]\-\-dump\f[R], \f[B]\-o\f[R] \f[I]path\f[R]
Path of file or named pipe to dump received raw data to.
.TP
\f[B]\-\-help\f[R], \f[B]\-h\f[R]
Print available command\-line arguments and quit.
.TP
\f[B]\-\-interval\f[R], \f[B]\-I\f[R] \f[I]seconds\f[R]
Observation emit interval in seconds (default is 60 seconds).
.TP
\f[B]\-\-logger\f[R], \f[B]\-l\f[R] \f[I]name\f[R]
Name of logger.
If set, sends logs to \f[I]dmlogger(1)\f[R] process of given name.
.TP
\f[B]\-\-name\f[R], \f[B]\-n\f[R] \f[I]name\f[R]
Name of program instance and configuration (default is
\f[CR]dmved\f[R]).
.TP
\f[B]\-\-node\f[R], \f[B]\-N\f[R] \f[I]id\f[R]
Node id.
.TP
\f[B]\-\-path\f[R], \f[B]\-p\f[R] \f[I]path\f[R]
Path to TTY device (for example, \f[CR]/dev/ttyUSB0\f[R]).
.TP
\f[B]\-\-receiver\f[R], \f[B]\-r\f[R] \f[I]name\f[R]
Name of the observation receiver, without leading \f[CR]/\f[R].
.TP
\f[B]\-\-sensor\f[R], \f[B]\-S\f[R] \f[I]id\f[R]
Sensor id.
.TP
\f[B]\-\-target\f[R], \f[B]\-T\f[R] \f[I]id\f[R]
Target id.
.TP
\f[B]\-\-verbose\f[R], \f[B]\-V\f[R]
Print log messages to \f[I]stderr\f[R].
.TP
\f[B]\-\-version\f[R], \f[B]\-v\f[R]
Print version information and quit.
.SH EXIT STATUS
.TP
\f[B]0\f[R]
Success.
Process terminated without errors.
.TP
\f[B]1\f[R]
Failure.
Process failed.
.SH ENVIRONMENT
.TP
\f[B]DM_LOGGER\f[R]
Name of logger instance to send logs to.
.TP
\f[B]NO_COLOR\f[R]
Disable ANSI colour output.
.SH EXAMPLE
Read status data from MPPT connected via TTL:
.IP
.EX
$ dmved \-n dmved \-c /usr/local/etc/dmpack/dmved.conf \-V
.EE
