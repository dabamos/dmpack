.TH "DMAPI" "1" "" "Version 2.0.0" "User Commands"
.SH NAME
dmapi \(en FastCGI\-based HTTP\-RPC service for database access
.SH SYNOPSIS
\f[B]dmapi\f[R]
.SH DESCRIPTION
\f[B]dmapi\f[R] is an HTTP\-RPC service for remote DMPACK database
access.
The web application has to be executed by a FastCGI\-compatible web
server or a FastCGI spawner.
It is recommended to run \f[B]dmapi\f[R] in \f[I]lighttpd(1)\f[R].
.PP
The \f[B]dmapi\f[R] service offers endpoints for clients to insert
nodes, sensors, targets, observations, logs, and beats into the server
SQLite databases, and to retrieve the data in CSV, JSON, JSON Lines, or
Fortran 95 Namelist format.
Authentication and encryption are independent from \f[B]dmapi\f[R] and
have to be provided by the environment.
.PP
The POST data sent by clients must be serialised in Namelist format,
with optional deflate or zstd compression.
The content type and the content encoding have to be passed in the HTTP
header of the request.
.PP
If HTTP Basic Auth is enabled, the sensor id of each beat, image, log,
node, sensor, and observation sent to the RPC service must match the
name of the authenticated user, otherwise, the data will be rejected
(HTTP 401).
.SH ENVIRONMENT
Add the following environment variables to the configuration of the web
server or spawner to pass them to \f[B]dmapi\f[R]:
.TP
\f[B]DM_BEAT_DB\f[R]
Path to heartbeat database.
.TP
\f[B]DM_IMAGE_DB\f[R]
Path to image database.
.TP
\f[B]DM_IMAGE_DIR\f[R]
Path to image directory.
.TP
\f[B]DM_LOG_DB\f[R]
Path to log database.
.TP
\f[B]DM_OBSERV_DB\f[R]
Path to observation database.
.TP
\f[B]DM_READ_ONLY\f[R]
Set to 1 to open databases in read\-only mode.
.SH SEE ALSO
\f[I]dmbeat(1)\f[R], \f[I]dmsync(1)\f[R]
