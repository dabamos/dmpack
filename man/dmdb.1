.\" Automatically generated by Pandoc 3.8.3
.\"
.TH "DMDB" "1" "" "Version 2.0.0" "User Commands"
.SH NAME
dmdb \(en stores observations received from message queue in database
.SH SYNOPSIS
\f[B]dmdb\f[R] \-\-help
.PP
\f[B]dmdb\f[R] \-\-version
.PP
\f[B]dmdb\f[R] \-\-\f[B]database\f[R] \f[I]file\f[R] \-\-\f[B]node\f[R]
\f[I]id\f[R] [\-\-\f[B]ipc\f[R]] [\-\-\f[B]logger\f[R] \f[I]name\f[R]]
[\-\-\f[B]debug\f[R]] [\-\-\f[B]verbose\f[R]]
.PP
\f[B]dmdb\f[R] \-\-\f[B]config\f[R] \f[I]file\f[R] [\-\-\f[B]name\f[R]
\f[I]name\f[R]]
.SH DESCRIPTION
The \f[B]dmdb\f[R] program collects observations from a POSIX message
queue and stores them in an SQLite database.
The name of the message queue matches the given \f[B]dmdb\f[R] name, by
default \f[CR]dmdb\f[R].
The IPC option enables process synchronisation via POSIX semaphores.
The semaphore value is increased from 0 to 1 for every observation that
has been received.
The name of the semaphore equals the \f[B]dmdb\f[R] name.
Only a single process shall wait for the semaphore.
.SH OPTIONS
.TP
\f[B]\-\-config\f[R], \f[B]\-c\f[R] \f[I]file\f[R]
Path to configuration file.
.TP
\f[B]\-\-database\f[R], \f[B]\-d\f[R] \f[I]file\f[R]
Path to SQLite observation database.
.TP
\f[B]\-\-debug\f[R], \f[B]\-D\f[R]
Forward logs messages of level \f[CR]LL_DEBUG\f[R] via IPC (if logger is
set).
.TP
\f[B]\-\-help\f[R], \f[B]\-h\f[R]
Print available command\-line arguments and quit.
.TP
\f[B]\-\-ipc\f[R], \f[B]\-Q\f[R]
Uses a POSIX semaphore for process synchronisation.
The name of the semaphore matches the instance name (with leading
\f[CR]/\f[R]).
The semaphore is set to 1 each time an observation has been received.
Only a single process shall wait for this semaphore, otherwise, reading
occurs in round\-robin fashion.
.TP
\f[B]\-\-logger\f[R], \f[B]\-l\f[R] \f[I]name\f[R]
Name of logger.
If set, sends logs to \f[I]dmlogger(1)\f[R] process of given name.
.TP
\f[B]\-\-name\f[R], \f[B]\-n\f[R] \f[I]name\f[R]
Name of program instance, configuration, POSIX message queue, and POSIX
semaphore (default is \f[CR]dmdb\f[R]).
.TP
\f[B]\-\-node\f[R], \f[B]\-N\f[R] \f[I]id\f[R]
Node id.
.TP
\f[B]\-\-verbose\f[R], \f[B]\-V\f[R]
Print log messages to \f[I]stderr\f[R].
.TP
\f[B]\-\-version\f[R], \f[B]\-v\f[R]
Print version information and quit.
.SH EXIT STATUS
.TP
\f[B]0\f[R]
Success.
Program executed without errors.
.TP
\f[B]1\f[R]
Failure.
Program execution failed.
.SH ENVIRONMENT
.TP
\f[B]DM_LOGGER\f[R]
Name of logger instance to send logs to.
.TP
\f[B]NO_COLOR\f[R]
Disable ANSI colour output.
.SH EXAMPLE
Create a message queue \f[CR]/dmdb\f[R], wait for incoming observations,
and store them in the given database:
.IP
.EX
$ dmdb \-n dmdb \-N dummy\-node \-d /var/dmpack/observ.db \-V
.EE
.SH SEE ALSO
\f[I]dmdbctl(1)\f[R], \f[I]dminit(1)\f[R], \f[I]dmsync(1)\f[R]
