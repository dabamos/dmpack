.TH "DMPIPE" "1" "" "Version 2.0.0" "User Commands"
.SH NAME
dmpipe \(en reads observations from sub\-process
.SH SYNOPSIS
\f[B]dmpipe\f[R] \-\-help
.PP
\f[B]dmpipe\f[R] \-\-version
.PP
\f[B]dmpipe\f[R] \-\-\f[B]config\f[R] \f[I]file\f[R] [\-\-\f[B]name\f[R]
\f[I]name\f[R]] [\-\-\f[B]node\f[R] \f[I]id\f[R]] [\-\-\f[B]sensor\f[R]
\f[I]id\f[R]] [\-\-\f[B]logger\f[R] \f[I]name\f[R]]
[\-\-\f[B]debug\f[R]] [\-\-\f[B]verbose\f[R]]
.SH DESCRIPTION
The \f[B]dmpipe\f[R] program reads responses from a process connected
via anonymous pipe.
.PP
Each request of an observation must contain the process to execute in
attribute \f[CR]request\f[R].
Response values are extracted by group from the raw response using the
provided regular expression pattern.
A response has to be added for each group in the pattern.
The response name must equal the group name.
.PP
If any receivers are specified, observations are forwarded to the next
receiver via POSIX message queue.
The program can act as a sole data logger if output and format are set.
If the output path is set to \f[CR]\-\f[R], observations are printed to
\f[I]stdout\f[R].
.PP
A configuration file is required to configure the jobs to perform.
Each observation must have a valid target id.
The database must contain node, sensor, and target of all observations
configured.
.SH OPTIONS
.TP
\f[B]\-\-config\f[R], \f[B]\-c\f[R] \f[I]file\f[R]
File path to the configuration file.
.TP
\f[B]\-\-debug\f[R], \f[B]\-D\f[R]
Forward logs messages of level \f[CR]LL_DEBUG\f[R] via IPC (if logger is
set).
.TP
\f[B]\-\-format\f[R], \f[B]\-f\f[R] [csv|jsonl]
Output format of observations if \f[CR]\-\-output\f[R] is set.
Either CSV or JSON Lines.
.TP
\f[B]\-\-help\f[R], \f[B]\-h\f[R]
Print available command\-line arguments and quit.
.TP
\f[B]\-\-logger\f[R], \f[B]\-l\f[R] \f[I]name\f[R]
Name of logger.
If set, sends logs to \f[I]dmlogger(1)\f[R] process of given name.
.TP
\f[B]\-\-name\f[R], \f[B]\-n\f[R] \f[I]name\f[R]
Name of program instance and configuration (default is
\f[CR]dmpipe\f[R]).
.TP
\f[B]\-\-node\f[R], \f[B]\-N\f[R] \f[I]id\f[R]
Node id.
.TP
\f[B]\-\-output\f[R], \f[B]\-o\f[R] \f[I]file\f[R]
Output file to append observations to (\f[CR]\-\f[R] for
\f[I]stdout\f[R]).
.TP
\f[B]\-\-sensor\f[R], \f[B]\-S\f[R] \f[I]id\f[R]
Sensor id.
.TP
\f[B]\-\-verbose\f[R], \f[B]\-V\f[R]
Print log messages to \f[I]stderr\f[R].
.TP
\f[B]\-\-version\f[R], \f[B]\-v\f[R]
Print version information and quit.
.SH EXIT STATUS
.TP
\f[B]0\f[R]
Success.
Process terminated without errors.
.TP
\f[B]1\f[R]
Failure.
Process failed.
.SH ENVIRONMENT
.TP
\f[B]DM_LOGGER\f[R]
Name of logger instance to send logs to.
.TP
\f[B]NO_COLOR\f[R]
Disable ANSI colour output.
.SH EXAMPLE
Read the jobs from configuration file and execute them sequentially:
.IP
.EX
$ dmpipe \-n dmpipe \-c /usr/local/etc/dmpack/dmpipe.conf \-V
.EE
