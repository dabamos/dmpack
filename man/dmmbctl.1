.\" Automatically generated by Pandoc 3.8.3
.\"
.TH "DMMBCTL" "1" "" "Version 2.0.0" "User Commands"
.SH NAME
dmmbctl \(en read or write value from or to Modbus RTU/TCP register
.SH SYNOPSIS
\f[B]dmmbctl\f[R] \-\-help
.PP
\f[B]dmmbctl\f[R] \-\-version
.PP
\f[B]dmmbctl\f[R] \-\-\f[B]path\f[R] \f[I]path\f[R]
\-\-\f[B]baudrate\f[R] \f[I]n\f[R] \-\-\f[B]bytesize\f[R] \f[I]n\f[R]
\-\-\f[B]parity\f[R] \f[I]name\f[R] \-\-\f[B]stopbits\f[R] \f[I]n\f[R]
\-\-\f[B]slave\f[R] \f[I]n\f[R] \-\-\f[B]type\f[R] \f[I]name\f[R]
[\-\-\f[B]order\f[R] \f[I]name\f[R]] [\-\-\f[B]code\f[R] \f[I]n\f[R]]
[\-\-\f[B]read\f[R] \f[I]address\f[R]] [\-\-\f[B]write\f[R]
\f[I]address\f[R]] [\-\-\f[B]value\f[R] \f[I]n\f[R]]
.PP
\f[B]dmmbctl\f[R] \-\-\f[B]address\f[R] \f[I]ip\f[R] \-\-\f[B]port\f[R]
\f[I]port\f[R] \-\-\f[B]slave\f[R] \f[I]n\f[R] \-\-\f[B]type\f[R]
\f[I]name\f[R] [\-\-\f[B]order\f[R] \f[I]name\f[R]] [\-\-\f[B]code\f[R]
\f[I]n\f[R]] [\-\-\f[B]read\f[R] \f[I]address\f[R]] [\-\-\f[B]write\f[R]
\f[I]address\f[R]] [\-\-\f[B]value\f[R] \f[I]n\f[R]]
[\-\-\f[B]debug\f[R]]
.SH DESCRIPTION
The \f[B]dmmbctl\f[R] command\-line program reads a value from or writes
a value to a register of a connected Modbus RTU/TCP device.
Modbus RTU requires the command\-line arguments \f[CR]\-\-path\f[R],
\f[CR]\-\-baudrate\f[R], \f[CR]\-\-bytesize\f[R], \f[CR]\-\-parity\f[R],
and \f[CR]\-\-stopbits\f[R].
For Modbus TCP, only \f[CR]\-\-address\f[R] and \f[CR]\-\-port\f[R] must
be passed.
.PP
The following data types are supported:
.TP
\f[CR]int16\f[R]
2\-byte signed integer.
.TP
\f[CR]int32\f[R]
4\-byte signed integer.
.TP
\f[CR]uint16\f[R]
2\-byte unsigned integer.
.TP
\f[CR]uint32\f[R]
4\-byte unsigned integer.
.TP
\f[CR]float\f[R]
4\-byte float.
.PP
In order to read floating\-point values, set \f[CR]\-\-type\f[R] to
\f[CR]float\f[R] and \f[CR]\-\-order\f[R] to the byte order used by the
Modbus device, either \f[CR]abcd\f[R], \f[CR]badc\f[R], \f[CR]cdab\f[R],
or \f[CR]dcba\f[R].
Only integer values may be written to a register.
.SH OPTIONS
.TP
\f[B]\-\-address\f[R], \f[B]\-a\f[R] \f[I]ip\f[R]
Modbus TCP address (IPv4).
.TP
\f[B]\-\-baudrate\f[R], \f[B]\-B\f[R] \f[I]n\f[R]
Modbus RTU baud rate (9600, 19200, \&...).
.TP
\f[B]\-\-bytesize\f[R], \f[B]\-Z\f[R] \f[I]n\f[R]
Modbus RTU byte size (5, 6, 7, 8).
.TP
\f[B]\-\-code\f[R], \f[B]\-C\f[R] \f[I]n\f[R]
Optional Modbus function code.
Set to 1 to read coil status (function 0x01) and to 5 to write coil
status (function 0x05).
.TP
\f[B]\-\-debug\f[R], \f[B]\-V\f[R]
Print debug messages from \f[I]libmodbus\f[R].
.TP
\f[B]\-\-help\f[R], \f[B]\-h\f[R]
Print available command\-line arguments and quit.
.TP
\f[B]\-\-order\f[R], \f[B]\-b\f[R] [abcd|badc|cdab|dcba]
Byte order of float (\f[CR]abcd\f[R], \f[CR]badc\f[R], \f[CR]cdab\f[R],
\f[CR]dcba\f[R]).
.TP
\f[B]\-\-parity\f[R], \f[B]\-P\f[R] [none|even|odd]
Modbus RTU parity bits (\f[CR]none\f[R], \f[CR]even\f[R],
\f[CR]odd\f[R]).
.TP
\f[B]\-\-path\f[R], \f[B]\-p\f[R] \f[I]path\f[R]
Modbus RTU device path.
.TP
\f[B]\-\-port\f[R], \f[B]\-q\f[R] \f[I]port\f[R]
Modbus TCP port.
.TP
\f[B]\-\-read\f[R], \f[B]\-r\f[R] \f[I]register\f[R]
Read value from given Modbus register address.
.TP
\f[B]\-\-slave\f[R], \f[B]\-s\f[R] \f[I]n\f[R]
Slave id of Modbus device.
.TP
\f[B]\-\-stopbits\f[R], \f[B]\-O\f[R] \f[I]n\f[R]
Modbus RTU stop bits (1, 2).
.TP
\f[B]\-\-type\f[R], \f[B]\-t\f[R] [int16|int32|uint16|uint32|float]
Number type (\f[CR]int16\f[R], \f[CR]int32\f[R], \f[CR]uint16\f[R],
\f[CR]uint32\f[R], \f[CR]float\f[R]).
.TP
\f[B]\-\-value\f[R], \f[B]\-i\f[R] \f[I]n\f[R]
Integer value to write.
.TP
\f[B]\-\-version\f[R], \f[B]\-v\f[R]
Print version information and quit.
.TP
\f[B]\-\-write\f[R] , \f[B]\-w\f[R] \f[I]register\f[R]
Write value to given Modbus register address.
.SH EXIT STATUS
.TP
\f[B]0\f[R]
Success.
Modbus access was successful.
.TP
\f[B]1\f[R]
Failure.
Program execution failed.
.SH EXAMPLE
Read the current temperature in degrees Celsius measured by a Pt100 RTD
that is connected to an I/O module with Modbus RTU interface:
.IP
.EX
$ dmmbctl \-p /dev/ttyUSB0 \-B 19200 \-Z 8 \-P even \-O 1 \(rs
  \-s 1 \-r 50 \-t float \-b abcd
21.217552185059
.EE
.PP
The I/O module is attached through an RS\-485 adapter on
\f[CR]/dev/ttyUSB\f[R] (19200 baud, 8E1) and configured to use slave id
1.
The value is read from register 50 and converted to float in
\f[CR]abcd\f[R] byte order.
.SH SEE ALSO
\f[I]dmmb(1)\f[R]
