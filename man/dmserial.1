.TH "DMSERIAL" "1" "" "Version 2.0.0" "User Commands"
.SH NAME
dmserial \(en reads observations from TTY/PTY
.SH SYNOPSIS
\f[B]dmserial\f[R] \-\-help
.PP
\f[B]dmserial\f[R] \-\-version
.PP
\f[B]dmserial\f[R] \-\-\f[B]config\f[R] \f[I]file\f[R]
[\-\-\f[B]name\f[R] \f[I]name\f[R]] [\-\-\f[B]node\f[R] \f[I]id\f[R]]
[\-\-\f[B]sensor\f[R] \f[I]id\f[R]] [\-\-\f[B]logger\f[R]
\f[I]name\f[R]] [\-\-\f[B]path\f[R] \f[I]path\f[R]]
[\-\-\f[B]baudrate\f[R] \f[I]n\f[R]] [\-\-\f[B]bytesize\f[R]
\f[I]n\f[R]] [\-\-\f[B]stopbits\f[R] \f[I]n\f[R]] [\-\-\f[B]parity\f[R]
\f[I]name\f[R]] [\-\-\f[B]timeout\f[R] \f[I]n\f[R]]
[\-\-\f[B]format\f[R] \f[I]name\f[R]] [\-\-\f[B]output\f[R]
\f[I]file\f[R]] [\-\-\f[B]dtr\f[R]] [\-\-\f[B]rts\f[R]]
[\-\-\f[B]debug\f[R]] [\-\-\f[B]verbose\f[R]]
.SH DESCRIPTION
The \f[B]dmserial\f[R] program sends requests to a sensor connected via
USB/RS\-232/RS\-422/RS\-485.
Sensor commands and responses are sent/received through a teletype (TTY)
device provided by the operating system.
A pseudo\-terminal (PTY) may be used to connect a virtual sensor.
.PP
Each request of an observation must contain the raw request intended for
the sensor in attribute \f[CR]request\f[R].
Response values are extracted by group from the raw response using the
given regular expression pattern.
Each group name must match a response name.
Response names are limited to 32 characters.
.PP
Observations will be forwarded to the next receiver via POSIX message
queue if any receiver is specified.
The program can act as a sole data logger if output and format are set.
If the output path is set to \f[CR]\-\f[R], observations are printed to
\f[I]stdout\f[R], else to file.
.PP
A configuration file is required to configure the jobs to perform.
Each observation must have a valid target id.
The database must contain the specified node, sensor, and targets.
The observation requests may be created by using GeoCOM API functions.
.SH OPTIONS
.TP
\f[B]\-\-baudrate\f[R], \f[B]\-B\f[R] \f[I]n\f[R]
Number of symbols transmitted per second.
The following baud rates are supported: 50, 75, 110, 134, 150, 200, 300,
600, 1200, 1800, 2400, 4800, 9600, 19200, 38400, 57600, 115200, 230400,
460800, 921600.
.TP
\f[B]\-\-bytesize\f[R], \f[B]\-Z\f[R] \f[I]n\f[R]
Byte size (5, 6, 7, 8).
.TP
\f[B]\-\-config\f[R], \f[B]\-c\f[R] \f[I]file\f[R]
File path to the configuration file.
.TP
\f[B]\-\-debug\f[R], \f[B]\-D\f[R]
Forward logs messages of level \f[CR]LL_DEBUG\f[R] via IPC (if logger is
set).
.TP
\f[B]\-\-dtr\f[R], \f[B]\-Q\f[R]
Enable Data Terminal Ready (DTR).
.TP
\f[B]\-\-format\f[R], \f[B]\-f\f[R] [csv|jsonl]
Output format of observations if \f[CR]\-\-output\f[R] is set.
Either CSV or JSON Lines.
.TP
\f[B]\-\-help\f[R], \f[B]\-h\f[R]
Print available command\-line arguments and quit.
.TP
\f[B]\-\-logger\f[R], \f[B]\-l\f[R] \f[I]name\f[R]
Name of logger.
If set, sends logs to \f[I]dmlogger(1)\f[R] process of given name.
.TP
\f[B]\-\-name\f[R], \f[B]\-n\f[R] \f[I]name\f[R]
Name of program instance and configuration (default is
\f[CR]dmserial\f[R]).
.TP
\f[B]\-\-node\f[R], \f[B]\-N\f[R] \f[I]id\f[R]
Node id.
.TP
\f[B]\-\-output\f[R], \f[B]\-o\f[R] \f[I]file\f[R]
Output file to append observations to (\f[CR]\-\f[R] for
\f[I]stdout\f[R]).
.TP
\f[B]\-\-parity\f[R], \f[B]\-P\f[R] [none|even|odd]
Parity bits (\f[CR]none\f[R], \f[CR]even\f[R], or \f[CR]odd\f[R]).
.TP
\f[B]\-\-rts\f[R], \f[B]\-R\f[R]
Enable Request To Send (RTS).
.TP
\f[B]\-\-sensor\f[R], \f[B]\-S\f[R] \f[I]id\f[R]
Sensor id.
.TP
\f[B]\-\-stopbits\f[R], \f[B]\-O\f[R] \f[I]n\f[R]
Number of stop bits (1, 2).
.TP
\f[B]\-\-timeout\f[R], \f[B]\-T\f[R] \f[I]n\f[R]
Connection timeout in seconds.
.TP
\f[B]\-\-path\f[R], \f[B]\-p\f[R] \f[I]path\f[R]
Path to TTY/PTY device (for example, \f[CR]/dev/ttyUSB0\f[R]).
.TP
\f[B]\-\-verbose\f[R], \f[B]\-V\f[R]
Print log messages to \f[I]stderr\f[R].
.TP
\f[B]\-\-version\f[R], \f[B]\-v\f[R]
Print version information and quit.
.SH EXIT STATUS
.TP
\f[B]0\f[R]
Success.
Process terminated without errors.
.TP
\f[B]1\f[R]
Failure.
Process failed.
.SH ENVIRONMENT
.TP
\f[B]DM_LOGGER\f[R]
Name of logger instance to send logs to.
.TP
\f[B]NO_COLOR\f[R]
Disable ANSI colour output.
.SH EXAMPLE
Read the jobs to perform from configuration file and execute them
sequentially:
.IP
.EX
$ dmserial \-n dmserial \-c /usr/local/etc/dmpack/dmserial.conf \-V
.EE
