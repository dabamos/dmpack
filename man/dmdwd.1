.TH "DMDWD" "1" "" "Version 2.0.0" "User Commands"
.SH NAME
dmdwd \(en reads weather reports from Deutscher Wetterdienst (DWD)
.SH SYNOPSIS
\f[B]dmdwd\f[R] \-\-help
.PP
\f[B]dmdwd\f[R] \-\-version
.PP
\f[B]dmdwd\f[R] \-\-\f[B]node\f[R] \f[I]id\f[R] \-\-\f[B]sensor\f[R]
\f[I]id\f[R] \-\-\f[B]target\f[R] \f[I]id\f[R] \-\-\f[B]station\f[R]
\f[I]id\f[R] [\-\-\f[B]catalog\f[R] \f[I]path\f[R]]
[\-\-\f[B]receiver\f[R] \f[I]name\f[R]] [\-\-\f[B]read\f[R]
\f[I]type\f[R]] [\-\-\f[B]interval\f[R] \f[I]seconds\f[R]]
[\-\-\f[B]name\f[R] \f[I]name\f[R]] [\-\-\f[B]logger\f[R]
\f[I]name\f[R]] [\-\-\f[B]debug\f[R]]
.PP
\f[B]dmdwd\f[R] \-\-\f[B]config\f[R] \f[I]file\f[R] [\-\-\f[B]name\f[R]
\f[I]name\f[R]]
.SH DESCRIPTION
This program fetches weather reports from the open data API of Deutscher
Wetterdienst (DWD) at <\c
.UR http://opendata.dwd.de/weather/weather_reports/poi/
.UE \c
> and forwards them to a receiver via POSIX message queue.
Node id, sensor id, target id, and station id are mandatory.
See the MOSMIX station catalog or the \c
.UR https://www.dwd.de/DE/leistungen/klimadatendeutschland/stationsliste.html
Stationslexikon
.UE \c
\ for a list of all stations.
.PP
Observations may contain the following response values, if measured by
the weather station:
.TP
cloud_cover
Cloud cover total [%].
.TP
temperature_mean_prev_day
Daily mean of temperature previous day [°C].
.TP
depth_new_snow
Depth of new snow [cm].
.TP
dew_point_temperature_2m
Dew point temperature at 2 meters above ground [°C].
.TP
diffuse_radiation_last_hour
Diffuse solar radiation last hour [W/m\(ha2].
.TP
direct_radiation_last_24h
Direct solar radiation last 24 hours [W/m\(ha2].
.TP
direct_radiation_last_hour
Direct solar radiation last hour [W/m\(ha2].
.TP
dry_bulb_temperature_2m
Dry bulb temperature at 2 meters above ground [°C].
.TP
evaporation_last_24h
Evaporation/evapotranspiration last 24 hours [mm].
.TP
global_radiation_last_hour
Global radiation last hour [W/m\(ha2].
.TP
global_radiation_last_24h
Global radiation last 24 hours [W/m\(ha2].
.TP
lowest_cloud_above_station
Height of base of lowest cloud above station [m].
.TP
horizontal_visibility
Horizontal visibility [km].
.TP
max_wind_speed_mean_prev_day
Maximum of 10 minutes mean of wind speed for previous day [km/h].
.TP
max_temperature_prev_day
Maximum of temperature for previous day [°C].
.TP
max_temperature_last_12h_2m
Maximum temperature last 12 hours 2 meters above ground [°C].
.TP
max_wind_speed_mean_last_hour
Maximum wind speed as 10 minutes mean during last hour [km/h].
.TP
max_wind_speed_last_6h
Maximum wind speed during last 6 hours [km/h].
.TP
max_wind_speed_prev_day
Maximum wind speed for previous day [km/h].
.TP
max_wind_speed_last_hour
Maximum wind speed last hour [km/h].
.TP
wind_dir_mean_last_10min_10m
Mean wind direction during last 10 min at 10 meters above ground [°].
.TP
wind_speed_mean_last_10min_10m
Mean wind speed during last 10 min at 10 meters above ground [km/h].
.TP
min_temperature_prev_day_5cm
Minimum of temperature at 5 cm above ground for previous day [°C].
.TP
min_temperature_prev_day
Minimum of temperature for previous day [°C].
.TP
min_temperature_last_12h_2m
Minimum temperature last 12 hours 2 meters above ground [°C].
.TP
min_temperature_last_12h_5cm
Minimum temperature last 12 hours 5 cm above ground [°C].
.TP
last_weather1
Past weather 1 [code].
.TP
last_weather2
Past weather 2 [code].
.TP
precipitation_last_24h
Precipitation amount last 24 hours [mm].
.TP
precipitation_last_3h
Precipitation amount last 3 hours [mm].
.TP
precipitation_last_6h
Precipitation amount last 6 hours [mm].
.TP
precipitation_last_hour
Precipitation amount last hour [mm].
.TP
precipitation_last_12h
Precipitation last 12 hours [mm].
.TP
present_weather
Present weather [code].
.TP
pressure_mean_sea_level
Pressure reduced to mean sea level [hPa].
.TP
relative_humidity
Relative humidity [%].
.TP
water_temperature
Sea/water temperature [°C].
.TP
temperature_5cm
Temperature at 5 cm above ground [°C].
.TP
total_snow_depth
Total snow depth [cm].
.TP
total_time_sunshine_last_hour
Total time of sunshine during last hour [min].
.TP
total_time_sunshine_last_day
Total time of sunshine last day [h].
.PP
DWD provides an \c
.UR https://www.dwd.de/DE/leistungen/opendata/help/schluessel_datenformate/csv/poi_present_weather_zuordnung_pdf.pdf
assignment table
.UE \c
\ for the weather codes in responses \f[CR]last_weather1\f[R],
\f[CR]last_weather2\f[R], and \f[CR]present_weather\f[R].
.SH OPTIONS
.TP
\f[B]\-\-catalog\f[R], \f[B]\-C\f[R] \f[I]path\f[R]
Path to the MOSMIX catalog file.
The catalog is only used to verify the station id.
A valid station id does not ensure that Deutscher Wetterdienst provides
weather reports for this station, as the catalog contains stations that
are out of service.
.TP
\f[B]\-\-config\f[R], \f[B]\-c\f[R] \f[I]file\f[R]
File path to the configuration file.
.TP
\f[B]\-\-debug\f[R], \f[B]\-D\f[R]
Forward logs messages of level \f[CR]LL_DEBUG\f[R] via IPC (if logger is
set).
.TP
\f[B]\-\-help\f[R], \f[B]\-h\f[R]
Print available command\-line arguments and quit.
.TP
\f[B]\-\-interval\f[R], \f[B]\-I\f[R] \f[I]seconds\f[R]
Interval in seconds in which weather reports are fetched.
If set to 0 (default), exits after the first report has been fetched and
forwarded.
.TP
\f[B]\-\-logger\f[R], \f[B]\-l\f[R] \f[I]name\f[R]
Name of logger.
If set, sends logs to \f[I]dmlogger(1)\f[R] process of given name.
.TP
\f[B]\-\-name\f[R], \f[B]\-n\f[R] \f[I]name\f[R]
Name of program instance and configuration (default is
\f[CR]dmdwd\f[R]).
.TP
\f[B]\-\-node\f[R], \f[B]\-N\f[R] \f[I]id\f[R]
Node id.
.TP
\f[B]\-\-read\f[R], \f[B]\-R\f[R] [last|next|all]
Weather report records to read and forward.
On \f[CR]last\f[R] (default), reads only the last record in the file.
On \f[CR]next\f[R], waits until the weather report file has been updated
the next time and then sends the newest record.
On \f[CR]all\f[R], reads all records found in the reports file.
.TP
\f[B]\-\-receiver\f[R], \f[B]\-r\f[R] \f[I]name\f[R]
Name of the observation receiver, without leading \f[CR]/\f[R].
.TP
\f[B]\-\-sensor\f[R], \f[B]\-S\f[R] \f[I]id\f[R]
Sensor id.
.TP
\f[B]\-\-station\f[R], \f[B]\-m\f[R] \f[I]id\f[R]
MOSMIX station id.
.TP
\f[B]\-\-target\f[R], \f[B]\-T\f[R] \f[I]id\f[R]
Target id.
.TP
\f[B]\-\-verbose\f[R], \f[B]\-V\f[R]
Print log messages to \f[I]stderr\f[R].
.TP
\f[B]\-\-version\f[R], \f[B]\-v\f[R]
Print version information and quit.
.SH EXIT STATUS
.TP
\f[B]0\f[R]
Success.
Process terminated without errors.
.TP
\f[B]1\f[R]
Failure.
Process failed.
.SH ENVIRONMENT
.TP
\f[B]DM_LOGGER\f[R]
Name of logger instance to send logs to.
.TP
\f[B]NO_COLOR\f[R]
Disable ANSI colour output.
.SH EXAMPLE
Fetch the last weather report of station 10385 (Airport
Berlin\-Brandenburg) and send the observation to \f[CR]dmrecv\f[R]:
.IP
.EX
$ dmdwd \-N dummy\-node \-S dummy\-sensor \-T dummy\-target \(rs
  \-m 10385 \-R last \-r dmrecv \-V
.EE
.PP
Start \f[CR]dmrecv\f[R] with:
.IP
.EX
$ dmrecv \-n dmrecv \-t observ \-f jsonl \-o \(dq\-\(dq \-V
.EE
