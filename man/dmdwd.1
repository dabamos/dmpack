'\" t
.\"     Title: dmdwd
.\"    Author: Philipp Engel
.\" Generator: Asciidoctor 2.0.23
.\"      Date: 2025-09-02
.\"    Manual: User Commands
.\"    Source: DMDWD
.\"  Language: English
.\"
.TH "DMDWD" "1" "2025-09-02" "DMDWD" "User Commands"
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.ss \n[.ss] 0
.nh
.ad l
.de URL
\fI\\$2\fP <\\$1>\\$3
..
.als MTO URL
.if \n[.g] \{\
.  mso www.tmac
.  am URL
.    ad l
.  .
.  am MTO
.    ad l
.  .
.  LINKSTYLE blue R < >
.\}
.SH "NAME"
dmdwd \- reads weather reports from Deutscher Wetterdienst (DWD)
.SH "SYNOPSIS"
.sp
\fBdmdwd\fP \-\-help
.sp
\fBdmdwd\fP \-\-version
.sp
\fBdmdwd\fP \-\-\fBnode\fP \fIid\fP \-\-\fBsensor\fP \fIid\fP \-\-\fBtarget\fP \fIid\fP \-\-\fBstation\fP \fIid\fP
[\-\-\fBcatalog\fP \fIpath\fP] [\-\-\fBreceiver\fP \fIname\fP] [\-\-\fBread\fP \fItype\fP]
[\-\-\fBinterval\fP \fIseconds\fP] [\-\-\fBname\fP \fIname\fP] [\-\-\fBlogger\fP \fIname\fP] [\-\-\fBdebug\fP]
[\-\-\fBverbose\fP]
.sp
\fBdmdwd\fP \-\-\fBconfig\fP \fIfile\fP [\-\-\fBname\fP \fIname\fP]
.SH "DESCRIPTION"
.sp
This program fetches weather reports from the open data API of Deutscher
Wetterdienst (DWD) at
\c
.URL "http://opendata.dwd.de/weather/weather_reports/poi/" ""
and forwards them to a receiver via POSIX message queue. Node id, sensor id,
target id, and station id are mandatory. See the MOSMIX station catalog or the
\c
.URL "https://www.dwd.de/DE/leistungen/klimadatendeutschland/stationsliste.html" "Stationslexikon"
for a list of all stations.
.sp
Observations may contain the following response values, if measured by the
weather station:
.sp
cloud_cover
.RS 4
Cloud cover total [%].
.RE
.sp
temperature_mean_prev_day
.RS 4
Daily mean of temperature previous day [°C].
.RE
.sp
depth_new_snow
.RS 4
Depth of new snow [cm].
.RE
.sp
dew_point_temperature_2m
.RS 4
Dew point temperature at 2 meters above ground [°C].
.RE
.sp
diffuse_radiation_last_hour
.RS 4
Diffuse solar radiation last hour [W/m^2].
.RE
.sp
direct_radiation_last_24h
.RS 4
Direct solar radiation last 24 hours [W/m^2].
.RE
.sp
direct_radiation_last_hour
.RS 4
Direct solar radiation last hour [W/m^2].
.RE
.sp
dry_bulb_temperature_2m
.RS 4
Dry bulb temperature at 2 meters above ground [°C].
.RE
.sp
evaporation_last_24h
.RS 4
Evaporation/evapotranspiration last 24 hours [mm].
.RE
.sp
global_radiation_last_hour
.RS 4
Global radiation last hour [W/m^2].
.RE
.sp
global_radiation_last_24h
.RS 4
Global radiation last 24 hours [W/m^2].
.RE
.sp
lowest_cloud_above_station
.RS 4
Height of base of lowest cloud above station [m].
.RE
.sp
horizontal_visibility
.RS 4
Horizontal visibility [km].
.RE
.sp
max_wind_speed_mean_prev_day
.RS 4
Maximum of 10 minutes mean of wind speed for previous day [km/h].
.RE
.sp
max_temperature_prev_day
.RS 4
Maximum of temperature for previous day [°C].
.RE
.sp
max_temperature_last_12h_2m
.RS 4
Maximum temperature last 12 hours 2 meters above ground [°C].
.RE
.sp
max_wind_speed_mean_last_hour
.RS 4
Maximum wind speed as 10 minutes mean during last hour [km/h].
.RE
.sp
max_wind_speed_last_6h
.RS 4
Maximum wind speed during last 6 hours [km/h].
.RE
.sp
max_wind_speed_prev_day
.RS 4
Maximum wind speed for previous day [km/h].
.RE
.sp
max_wind_speed_last_hour
.RS 4
Maximum wind speed last hour [km/h].
.RE
.sp
wind_dir_mean_last_10min_10m
.RS 4
Mean wind direction during last 10 min at 10 meters above ground [°].
.RE
.sp
wind_speed_mean_last_10min_10m
.RS 4
Mean wind speed during last 10 min at 10 meters above ground [km/h].
.RE
.sp
min_temperature_prev_day_5cm
.RS 4
Minimum of temperature at 5 cm above ground for previous day [°C].
.RE
.sp
min_temperature_prev_day
.RS 4
Minimum of temperature for previous day [°C].
.RE
.sp
min_temperature_last_12h_2m
.RS 4
Minimum temperature last 12 hours 2 meters above ground [°C].
.RE
.sp
min_temperature_last_12h_5cm
.RS 4
Minimum temperature last 12 hours 5 cm above ground [°C].
.RE
.sp
last_weather1
.RS 4
Past weather 1 [code].
.RE
.sp
last_weather2
.RS 4
Past weather 2 [code].
.RE
.sp
precipitation_last_24h
.RS 4
Precipitation amount last 24 hours [mm].
.RE
.sp
precipitation_last_3h
.RS 4
Precipitation amount last 3 hours [mm].
.RE
.sp
precipitation_last_6h
.RS 4
Precipitation amount last 6 hours [mm].
.RE
.sp
precipitation_last_hour
.RS 4
Precipitation amount last hour [mm].
.RE
.sp
precipitation_last_12h
.RS 4
Precipitation last 12 hours [mm].
.RE
.sp
present_weather
.RS 4
Present weather [code].
.RE
.sp
pressure_mean_sea_level
.RS 4
Pressure reduced to mean sea level [hPa].
.RE
.sp
relative_humidity
.RS 4
Relative humidity [%].
.RE
.sp
water_temperature
.RS 4
Sea/water temperature [°C].
.RE
.sp
temperature_5cm
.RS 4
Temperature at 5 cm above ground [°C].
.RE
.sp
total_snow_depth
.RS 4
Total snow depth [cm].
.RE
.sp
total_time_sunshine_last_hour
.RS 4
Total time of sunshine during last hour [min].
.RE
.sp
total_time_sunshine_last_day
.RS 4
Total time of sunshine last day [h].
.RE
.sp
DWD provides an
\c
.URL "https://www.dwd.de/DE/leistungen/opendata/help/schluessel_datenformate/csv/poi_present_weather_zuordnung_pdf.pdf" "assignment table"
for the weather codes in responses \f(CRlast_weather1\fP, \f(CRlast_weather2\fP, and
\f(CRpresent_weather\fP.
.SH "OPTIONS"
.sp
\fB\-\-catalog\fP, \fB\-C\fP \fIpath\fP
.RS 4
Path to the MOSMIX catalog file. The catalog is only used to verify the
station id. A valid station id does not ensure that Deutscher Wetterdienst
provides weather reports for this station, as the catalog contains stations
that are out of service.
.RE
.sp
\fB\-\-config\fP, \fB\-c\fP \fIfile\fP
.RS 4
File path to the configuration file.
.RE
.sp
\fB\-\-debug\fP, \fB\-D\fP
.RS 4
Forward logs messages of level \f(CRLL_DEBUG\fP via IPC (if logger is set).
.RE
.sp
\fB\-\-help\fP, \fB\-h\fP
.RS 4
Print available command\-line arguments and quit.
.RE
.sp
\fB\-\-interval\fP, \fB\-I\fP \fIseconds\fP
.RS 4
Interval in seconds in which weather reports are fetched. If set to 0
(default), exits after the first report has been fetched and forwarded.
.RE
.sp
\fB\-\-logger\fP, \fB\-l\fP \fIname\fP
.RS 4
Name of logger. If set, sends logs to \fIdmlogger(1)\fP process of given name.
.RE
.sp
\fB\-\-name\fP, \fB\-n\fP \fIname\fP
.RS 4
Name of program instance and configuration (default is \f(CRdmdwd\fP).
.RE
.sp
\fB\-\-node\fP, \fB\-N\fP \fIid\fP
.RS 4
Node id.
.RE
.sp
\fB\-\-read\fP, \fB\-R\fP [last|next|all]
.RS 4
Weather report records to read and forward. On \f(CRlast\fP (default), reads only
the last record in the file. On \f(CRnext\fP, waits until the weather report file
has been updated the next time and then sends the newest record. On \f(CRall\fP,
reads all records found in the reports file.
.RE
.sp
\fB\-\-receiver\fP, \fB\-r\fP \fIname\fP
.RS 4
Name of the observation receiver, without leading \f(CR/\fP.
.RE
.sp
\fB\-\-sensor\fP, \fB\-S\fP \fIid\fP
.RS 4
Sensor id.
.RE
.sp
\fB\-\-station\fP, \fB\-m\fP \fIid\fP
.RS 4
MOSMIX station id.
.RE
.sp
\fB\-\-target\fP, \fB\-T\fP \fIid\fP
.RS 4
Target id.
.RE
.sp
\fB\-\-verbose\fP, \fB\-V\fP
.RS 4
Print log messages to \fIstderr\fP.
.RE
.sp
\fB\-\-version\fP, \fB\-v\fP
.RS 4
Print version information and quit.
.RE
.SH "EXIT STATUS"
.sp
\fB0\fP
.RS 4
Success.
Process terminated without errors.
.RE
.sp
\fB1\fP
.RS 4
Failure.
Process failed.
.RE
.SH "ENVIRONMENT"
.sp
\fBDM_LOGGER\fP
.RS 4
Name of logger instance to send logs to.
.RE
.sp
\fBNO_COLOR\fP
.RS 4
Disable ANSI colour output.
.RE
.SH "EXAMPLE"
.sp
Fetch the last weather report of station 10385 (Airport Berlin\-Brandenburg) and
send the observation to \f(CRdmrecv\fP:
.sp
.if n .RS 4
.nf
.fam C
$ dmdwd \-N dummy\-node \-S dummy\-sensor \-T dummy\-target \(rs
  \-m 10385 \-R last \-r dmrecv \-V
.fam
.fi
.if n .RE
.sp
Start \f(CRdmrecv\fP with:
.sp
.if n .RS 4
.nf
.fam C
$ dmrecv \-n dmrecv \-t observ \-f jsonl \-o "\-" \-V
.fam
.fi
.if n .RE
.SH "AUTHOR"
.sp
Philipp Engel