.TH "DMFS" "1" "" "Version 2.0.0" "User Commands"
.SH NAME
dmfs \(en reads observations from file or named pipe
.SH SYNOPSIS
\f[B]dmfs\f[R] \-\-help
.PP
\f[B]dmfs\f[R] \-\-version
.PP
\f[B]dmfs\f[R] \-\-\f[B]config\f[R] \f[I]file\f[R] [\-\-\f[B]name\f[R]
\f[I]name\f[R]] [\-\-\f[B]node\f[R] \f[I]id\f[R]] [\-\-\f[B]sensor\f[R]
\f[I]id\f[R]] [\-\-\f[B]logger\f[R] \f[I]name\f[R]]
[\-\-\f[B]format\f[R] \f[I]format\f[R]] [\-\-\f[B]output\f[R]
\f[I]file\f[R]] [\-\-\f[B]debug\f[R]]
.SH DESCRIPTION
The \f[B]dmfs\f[R] program reads observations from file system, virtual
file, or named pipe.
The program can be used to read sensor values from the 1\-Wire File
System (OWFS).
.PP
All requests of an observation have to contain the path of the file to
be read in attribute \f[CR]request\f[R].
Response values are extracted by group from the raw response using the
given regular expression pattern.
For each group to extract, a response with the name of the respective
group has to be added to the request.
.PP
If any receivers are specified, observations are forwarded to the next
receiver via POSIX message queue.
The program can act as a sole data logger if output and format are set.
If the output path is set to \f[CR]\-\f[R], observations are printed to
\f[I]stdout\f[R].
.PP
A configuration file is required to configure the jobs to perform.
Each observation must have a valid target id.
The database must contain the node, the sensor, and the target.
.SH OPTIONS
.TP
\f[B]\-\-config\f[R], \f[B]\-c\f[R] \f[I]file\f[R]
File path to the configuration file.
.TP
\f[B]\-\-debug\f[R], \f[B]\-D\f[R]
Forward logs messages of level \f[CR]LL_DEBUG\f[R] via IPC (if logger is
set).
.TP
\f[B]\-\-format\f[R], \f[B]\-f\f[R] [csv|jsonl]
Output format of observations if \f[CR]\-\-output\f[R] is set.
Either CSV or JSON Lines.
.TP
\f[B]\-\-help\f[R], \f[B]\-h\f[R]
Print available command\-line arguments and quit.
.TP
\f[B]\-\-logger\f[R], \f[B]\-l\f[R] \f[I]name\f[R]
Name of logger.
If set, sends logs to \f[I]dmlogger(1)\f[R] process of given name.
.TP
\f[B]\-\-name\f[R], \f[B]\-n\f[R] \f[I]name\f[R]
Name of program instance and configuration (default is \f[CR]dmfs\f[R]).
.TP
\f[B]\-\-node\f[R], \f[B]\-N\f[R] \f[I]id\f[R]
Node id.
.TP
\f[B]\-\-output\f[R], \f[B]\-o\f[R] \f[I]file\f[R]
Output file to append observations to (\f[CR]\-\f[R] for
\f[I]stdout\f[R]).
.TP
\f[B]\-\-sensor\f[R], \f[B]\-S\f[R] \f[I]id\f[R]
Sensor id.
.TP
\f[B]\-\-verbose\f[R], \f[B]\-V\f[R]
Print log messages to \f[I]stderr\f[R].
.TP
\f[B]\-\-version\f[R], \f[B]\-v\f[R]
Print version information and quit.
.SH EXIT STATUS
.TP
\f[B]0\f[R]
Success.
Process terminated without errors.
.TP
\f[B]1\f[R]
Failure.
Process failed.
.SH ENVIRONMENT
.TP
\f[B]DM_LOGGER\f[R]
Name of logger instance to send logs to.
.TP
\f[B]NO_COLOR\f[R]
Disable ANSI colour output.
.SH EXAMPLE
Read the jobs to perform from configuration file and execute them
sequentially:
.IP
.EX
$ dmfs \-n dmfs \-c /usr/local/etc/dmpack/dmfs.conf \-V
.EE
